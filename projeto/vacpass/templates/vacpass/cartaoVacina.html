{% extends "base.html" %}
{% load static %}
{% block headerextra %}
    <link rel="stylesheet" href="{% static 'css/cartao.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet"/>
    <script type="text/javascript">
        $(document).ready(function () {
            $(".js-example-basic-single").select2({
                    placeholder: "Escolha uma nova vacina",
                    allowClear: true
                }
            );
            $(".datepicker").datepicker();
        });
    </script>
{% endblock %}
{% block content %}

    <main>

        <input class="cartao-input" id="tab1" type="radio" name="tabs" checked>
        <label for="tab1">{{ request.user.first_name }}</label>
        {% for dept in dependetes %}
            <input class="cartao-input" id="tab{{ forloop.counter|add:'1' }}" type="radio" name="tabs">
            <label for="tab{{ forloop.counter|add:'1' }}">{{ dept.nome }}</label>
        {% endfor %}

        <section id="content1">
            {% for foo, key in doses.items %}
                <div class="vacina-column" style="float: left;">
                    <h2>{{ foo }}</h2>
                    {% for d in key %}
                        <div class="dose-box">
                            <ul>
                                <li>
                                    <p><strong>Dose: </strong>{{ d.0.dose }}</p>
                                </li>
                                <li>
                                    <p><strong>Data: </strong>{{ d.1 }}</p>
                                </li>
                                <li>
                                    <p><strong>Validade: </strong>{{ d.2 }}</p>
                                </li>
                            </ul>
                        </div>
                    {% endfor %}
                    <a class="renovar">Renovar</a>
                </div>
            {% endfor %}

            <div class="vacina-column " style="float: left;">
                <form method="post" action="{% url 'meucartao' %}">
                    {% csrf_token %}
                {% if vacinas is emp %}

                {% endif %}
                    <label id="label-nova-vacina" for="nova-vacina">
                        Adicione uma nova vacina
                        <br>
                        <select required style="width: 100%;" name="{{ formNew.vacina.name }}" class="js-example-basic-single js-states form-control"
                                id="{{ formNew.vacina.id_for_label }}">
                            <option></option>
                            {% for vac in vacinas %}
                                <option value="{{ vac.pk }}">{{ vac.nome }}</option>
                            {% endfor %}
                        </select>
                        {{ formNew.vacina.errors }}
                    </label>
                    <div class="fieldWrapper">

                        <label id="data-vacina" for="{{ formNew.data.id_for_label }}"></label><input
                            placeholder="Escolha a data da Vacina" type="text" name = {{ formNew.data.name }} id="{{ formNew.data.id_for_label }}"
                            class="datepicker" required>
                        {{ formNew.data.errors }}
                    </div>
                    <input type="submit" class="renovar" value="Adicionar"/>
                </form>
            </div>
        </section>
        {% for foo in dependetes %}
            <section id="content{{ forloop.counter|add:'1' }}">

                WAIT


            </section>
        {% endfor %}
    </main>
{% endblock %}